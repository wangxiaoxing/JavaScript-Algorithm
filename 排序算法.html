<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    //数组测试平台类
    function CArray(numElements) {
        this.dataStore=[];
        this.pos=0;
        this.numElements=numElements;
        this.insert=insert;
        this.toString=toString;
        this.clear=clear;
        this.setData=setData;
        this.swap=swap;
        this.bubbleSort=bubbleSort;
        this.selectionSort=selectionSort;
        this.insertionSort=insertionSort;
        for(var i=0;i<numElements;i++){
            this.dataStore[i]=i;
        }
    }

    function setData() {
        for(var i=0;i<this.numElements;i++){
            this.dataStore[i]=Math.floor(Math.random()*(this.numElements+1));
        }
    }

    function clear() {
      for (var i=0;i<this.dataStore.length;i++){
          this.dataStore[i]=0;
      }
    }

    function insert(element) {
        this.dataStore[this.pos++]=element;
    }

    function toString() {
        var restr="";
        for(var i=0;i<this.dataStore.length;i++){
            restr+=this.dataStore[i]+" ";
            if(i>0&i%10==0){
                restr+="\n";
            }
        }
        return restr;
    }

    function swap(arr,index1,index2) {
        var temp=arr[index1];
        arr[index1]=arr[index2];
        arr[index2]=temp;
    }
    //冒泡排序,第一次外循环中先通过两两比较把最大的值排到最后，第二次把剩余的最大值通过两两比较把排到倒数第二
    function bubbleSort() {
        var numElements=this.dataStore.length;
        //var temp;
        for(var outer=numElements;outer>=2;outer--){
            for (var inner=0;inner<=outer-1;inner++){
                if(this.dataStore[inner]>this.dataStore[inner+1]){
                    swap(this.dataStore,inner,inner+1);
                }
            }
            //console.log(this.toString());
        }
    }

    function bubblesort(arr) {
        var length=arr.length;
        for(var i=length;i>=2;i--){
            for(var j=0;j<=i-1;j++){
                if(arr[j]>arr[j+1]){
                    swap(arr,j,j+1);
                }
            }
        }
        return arr;
    }

    function bubblsort(arr) {
        var length=arr.length;
        for(var i=length;i>=2;i--){
            for(var j=0;j<=i-1;j++){
                if(arr[j]>arr[j+1]){
                    swap(arr,j,j+1);
                }
            }
        }
    }
    //console.log("..."+bubblesort([1,5,4,7,3,2,7]));


    //选择排序,选择数组中一位，与剩余的数字进行比较，将最小的那个数字移到前面，循环上述步骤。
    function selectionSort() {
        var min;
        for(var out=0;out<=this.dataStore.length-2;out++){
            min=out;
            for(var inner=out+1;inner<=this.dataStore.length-1;inner++){
                if(this.dataStore[inner]<this.dataStore[min]){
                    min=inner;
                }
            }
            swap(this.dataStore,out,min);
           // console.log(this.toString());
        }
    }

    function selectionsort(arr) {
        var min;
        var length=arr.length;
        for(var i=0;i<length-1;i++){
            min=i;
            for(var j=i+1;j<length;j++){
                if(arr[j]<arr[min]){
                    min=j;
                }
            }
            swap(arr,i,min);
        }
        return arr;
    }
//    console.log(selectionsort([1,5,4,7,3,2,7]));

    function selectionsort(arr) {
        var min;
        var length=arr.length;
        for(var i=0;i<length-1;i++){
            min=i;
            for(var j=i+1;j<length;j++){
                if(arr[j]<arr[min]){
                    min=j;
                }
            }
            swap(arr,min,i);
        }
        return arr;
    }



    //插入排序
    function insertionSort() {
        var  temp,inner;
        for(var outer=1;outer<=this.dataStore.length-1;outer++){
            temp=this.dataStore[outer];
            inner=outer;
            while (inner>0&&(this.dataStore[inner-1]>=temp)){
                this.dataStore[inner]=this.dataStore[inner-1];
                inner--;
            }
            this.dataStore[inner]=temp;
        }
    }

    function insertionsort(arr) {
        var temp,
            j,
            length=arr.length;
        for(var i=1;i<length;i++){
            temp=arr[i];
            j=i;
            while(j>0&&arr[j-1]>=temp){
                arr[j]=arr[j-1];
                j--;
            }
            arr[j]=temp;
        }
        return arr;
    }

    function insertionsort(arr) {
        var temp,
            j,
            length=arr.length;
        for(var i=1;i<length;i++){
            temp=arr[i];
            j=i;
            while (j>0&&arr[j-1]>=temp){
                arr[j]=arr[j-1];
                j--;
            }
            arr[j]=temp;
        }
        return arr;
    }

    function insertionsort(arr) {
        var temp,
            j,
            length=arr.length;
        for(var i=1;i<length;i++){
            temp=arr[i];
            j=i;
            while (j>0&&arr[j-1]>=temp){
                arr[j]=arr[j-1];
                j--;
            }
            arr[j]=temp;
        }
        return arr;
    }
    console.log(insertionsort([1,5,4,7,3,2,7]));

    //为排序函数计时
//    var numElements=10000;
//    var nums=new CArray(numElements);
//    nums.setData();
//    var start=new Date().getTime();
//    nums.bubbleSort();
//    var stop=new Date().getTime();
//    var elapsed=stop-start;
//    console.log("对"+numElements+" 个元素执行冒泡排序消耗的时间为："+elapsed+" 毫秒");
//    start=new Date().getTime();
//    nums.selectionSort();
//    stop=new Date().getTime();
//    elapsed=stop-start;
//    console.log("对"+numElements+" 个元素执行选择排序消耗的时间为："+elapsed+" 毫秒");
//    start=new Date().getTime();
//    nums.insertionSort();
//    stop=new Date().getTime();
//    elapsed=stop-start;
//    console.log("对"+numElements+" 个元素执行插入排序消耗的时间为："+elapsed+" 毫秒");

    //快速排序
    function qSort(list) {
        if(list.length==0){
            return [];
        }
        var lesser=[];
        var greater=[];
        var pivot=list[0];
        for(var i=1;i<list.length;i++){
            if(list[i]<pivot){
                lesser.push(list[i]);
            }else{
                greater.push(list[i]);
            }
        }
        return qSort(lesser).concat(pivot,qSort(greater));

    }

    function qSort(list){
        if(list.length==0){
            return [];
        }
        var lesser=[];
        var greater=[];
        var pivot=list[0];
        for(var i=1;i<list.length;i++){
            if(list[i]<pivot){
                lesser.push(list[i]);
            }else{
                greater.push(list[i]);
            }
        }
        return qSort(lesser).concat(pivot,qSort(greater));
    }

    function qSort(list) {
        if(list.length==0){
            return [];
        }
        var lesser=[];
        var greater=[];
        var pivot=list[0];
        for(var i=1;i<list.length;i++){
            if(list[i]<pivot){
                lesser.push(list[i]);
            }else {
                greater.push(list[i]);
            }
        }
        return qSort(lesser).concat(pivot,qSort(greater));
    }

    var a=[];
    for(var i=0;i<10;i++){
        a[i]=Math.floor(Math.random()*101);
    }
    console.log(a);
    console.log(qSort(a));

</script>
</body>
</html>